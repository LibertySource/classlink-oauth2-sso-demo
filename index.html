<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ClassLink Oauth2 SSO Demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        font-size: 18px;
        margin: 50px;
      }

      h1 {
        color: #333;
      }

      p {
        color: #666;
      }

      button {
        background-color: #007bff;
        color: white;
        font-size: 32px;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #0056b3;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        transform: scale(1.05);
      }

      .copy-container {
        display: flex;
        align-items: center;
        font-family: Arial, sans-serif;
      }
      .copy-icon {
        cursor: pointer;
        margin-left: 8px;
        font-size: 16px;
        color: #007bff;
      }
      .copy-icon:hover {
        color: #0056b3;
      }
    </style>
  </head>
  <body>
    <h1>ClassLink Oauth2 SSO Demo</h1>

    <p>This application demonstrates the ClassLink Oauth2 SSO flow.</p>

    <h2>Directions</h2>

    <p style="color: red;">Before continuing, make note of the following items:</p>

    <p class="copy-container"></p>
    <p>
      Copy the following URL into your clipboard.  This is the URL for the test login page: 
      <br/>
      <br/>
      <code>https://launchpad.classlink.com/cltest</code>
      <span class="copy-icon" onclick="copyToClipboard()">ðŸ“‹</span>
    </p>

    <table border="1" style="border-collapse: collapse; width: 100%;">
        <thead>
            <tr>
                <th style="padding: 10px; background-color: #f0f0f0;">Role</th>
                <th style="padding: 10px; background-color: #f0f0f0;">Username</th>
                <th style="padding: 10px; background-color: #f0f0f0;">Password</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="padding: 10px;">Student</td>
                <td style="padding: 10px;">{{StudentName}}</td>
                <td style="padding: 10px;">{{StudentPassword}}</td>
            </tr>
            <tr>
                <td style="padding: 10px;">Teacher</td>
                <td style="padding: 10px;">{{TeacherName}}</td>
                <td style="padding: 10px;">{{TeacherPassword}}</td>
            </tr>
            <tr>
                <td style="padding: 10px;">Parent</td>
                <td style="padding: 10px;">{{ParentName}}</td>
                <td style="padding: 10px;">{{ParentPassword}}</td>
            </tr>
            <tr>
                <td style="padding: 10px;">Administrator</td>
                <td style="padding: 10px;">{{AdminName}}</td>
                <td style="padding: 10px;">{{AdminPassword}}</td>
            </tr>
        </tbody>
    </table>
    
    <p>
      After clicking the button below, you will need to paste the copied URL
      into the browser window. You will then be directed to a login page where
      one of the credentials above should be entered.
    </p>

    <p>
      After logging in, you will be redirected back to the
      <code>/classlink_callback</code> endpoint of this application. That
      endpoint receives a code that is then exchanged for a token that can be
      used to look up user data.
    </p>

    <button onclick="redirectToNewPage()">
      Begin ClassLink Authentication
    </button>

    <p>
      Clicking the button above will redirect to the following URL:
      <br />
      <code>{{authUrl}}</code>
    </p>

    <script>
      function redirectToNewPage() {
        window.location.href = "{{authUrl}}"
      }

      function copyToClipboard() {
        const url = "https://launchpad.classlink.com/cltest"
        navigator.clipboard
          .writeText(url)
          .then(() => {})
          .catch((err) => {
            console.error("Failed to copy: ", err)
          })
      }
    </script>
  </body>
</html>
